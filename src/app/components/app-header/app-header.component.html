<header id="page-topbar" class="">
    <div class="layout-width">
        <div class="navbar-header">
            <div class="d-flex">
                <button (click)="toggleSidebarSize()" type="button"
                    class="btn btn-sm px-3 fs-16 header-item vertical-menu-btn topnav-hamburger"
                    id="topnav-hamburger-icon">
                    <!-- <span class="hamburger-icon">
                        <span></span>
                        <span></span>
                        <span></span>
                    </span> -->
                    <span class="ri-menu-2-line fs-2"></span>
                </button>
            </div>

            <div class="d-flex align-items-center">
                @if (role_key != 'superadmin') {
                <button type="button" class="btn btn-sm btn-dark d-flex align-items-center gap-2" data-bs-toggle="modal"
                    data-bs-target="#selectLocationHeader">
                    <i class="ri-map-2-fill"></i>
                    @if (location_id) {
                    {{location_obj?.location_name | titlecase}}
                    }
                </button>
                }

                <div class="dropdown ms-1 topbar-head-dropdown header-item">
                    <button type="button"
                        class="btn btn-icon btn-topbar material-shadow-none btn-ghost-secondary rounded-circle"
                        data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <img id="header-lang-img" [src]="flagSrc" alt="Header Language" height="20" class="rounded">
                    </button>
                    <div class="dropdown-menu dropdown-menu-end">
                        <a href="javascript:void(0);" class="dropdown-item notify-item language py-2"
                            (click)="switchLanguage('en')" title="English">
                            <img src="./assets/images/flags/us.svg" alt="user-image" class="me-2 rounded" height="18">
                            <span class="align-middle">English</span>
                        </a>
                        <a href="javascript:void(0);" class="dropdown-item notify-item language"
                            (click)="switchLanguage('de')" title="Deutsch">
                            <img src="./assets/images/flags/germany.svg" alt="user-image" class="me-2 rounded"
                                height="18">
                            <span class="align-middle">Deutsch</span>
                        </a>

                        <!-- <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="sp"
                            title="Spanish">
                            <img src="assets/images/flags/spain.svg" alt="user-image" class="me-2 rounded" height="18">
                            <span class="align-middle">Española</span>
                        </a>
                        <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="it"
                            title="Italian">
                            <img src="assets/images/flags/italy.svg" alt="user-image" class="me-2 rounded" height="18">
                            <span class="align-middle">Italiana</span>
                        </a>

                        <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="ru"
                            title="Russian">
                            <img src="assets/images/flags/russia.svg" alt="user-image" class="me-2 rounded" height="18">
                            <span class="align-middle">русский</span>
                        </a>

                        <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="ch"
                            title="Chinese">
                            <img src="assets/images/flags/china.svg" alt="user-image" class="me-2 rounded" height="18">
                            <span class="align-middle">中国人</span>
                        </a>

                        <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="fr"
                            title="French">
                            <img src="assets/images/flags/french.svg" alt="user-image" class="me-2 rounded" height="18">
                            <span class="align-middle">français</span>
                        </a>

                        <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="ar"
                            title="Arabic">
                            <img src="assets/images/flags/ae.svg" alt="user-image" class="me-2 rounded" height="18">
                            <span class="align-middle">Arabic</span>
                        </a> -->
                    </div>
                </div>

                <div class="dropdown ms-sm-3 ms-md-0 header-item topbar-user">
                    <button type="button" class="btn" id="page-header-user-dropdown" data-bs-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false">
                        <span class="d-flex align-items-center">
                            <img class="rounded-circle header-profile-user" [src]="picture" alt="Header Avatar">
                            <span class="text-start ms-xl-2">
                                <span class="d-none d-xl-inline-block ms-1 fw-medium user-name-text">{{name |
                                    titlecase}}</span>
                                <!-- <span class="d-none d-xl-block ms-1 fs-12 user-name-sub-text">{{role}}</span> -->
                            </span>
                        </span>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end">
                        <h6 class="dropdown-header bg-light">{{'app.welcome' | translate}} {{firstname}}!</h6>
                        <a class="dropdown-item d-flex" role="button" (click)="gotoSettings()">
                            <i class="ri-settings-2-line me-2"></i>
                            <span class="align-middle">{{'app.settings' | translate}}</span>
                        </a>

                        <a class="dropdown-item d-flex text-danger" role="button" (click)="logout()">
                            <i class="ri-logout-box-line me-2"></i>
                            <span class="align-middle" data-key="t-logout">{{'app.log_out' | translate}}</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- select location modal -->
<div id="selectLocationHeader" class="modal fade" tabindex="-1" aria-labelledby="selectLocationHeaderLabel"
    aria-hidden="true" style="display: none;" data-bs-backdrop="static">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content text-center" style="background-color: #f3f3f9;">
            <div class="modal-header">
                <h5 class="modal-title" id="selectLocationHeaderLabel">{{'app.select' | translate}} {{'app.location' |
                    translate}}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" #closeModal aria-label="Close">
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    @if (getLoader) {
                    @for (loader of skeleton_arr; track $index) {
                    <div class="col-xl-4 col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <p class="skeleton-card">Test</p>
                                <p class="skeleton-card mb-0">Test</p>
                            </div>
                        </div>
                    </div>
                    }
                    }
                    @else {
                    @for (location of location_arr; track location) {
                    <div class="col-xl-4 col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h5>{{location?.location_name | titlecase}}</h5>
                                <button type="button" class="btn w-100 mt-2" (click)="selectHeaderLocation(location)"
                                    [ngClass]="{'btn-dark': location_id != location?._id, 'btn-danger': location_id == location?._id}">
                                    {{location_id != location?._id ? ('app.select_location' | translate)
                                    : ('app.selected_location' | translate)}}
                                </button>
                            </div>
                        </div>
                    </div>
                    }
                    @empty {
                    <div class="text-danger">{{'app.none' | translate}} {{'app.location' | translate}} {{'app.found' |
                        translate}}</div>
                    }
                    }
                </div>
            </div>
        </div>
    </div>
</div>